[English](README.md) / [فارسی](README_FA.md)

# مترجم فایل‌های PDF با هوش مصنوعی

این ابزار قدرتمند فایل‌های PDF را از انگلیسی به فارسی ترجمه می‌کند و در عین حال چیدمان اصلی سند را کاملاً حفظ می‌نماید. این پروژه از API جمینی گوگل برای ترجمه با کیفیت بالا استفاده می‌کند و تکنیک‌های پیشرفته‌ای برای مدیریت نمایش متن راست به چپ فارسی پیاده‌سازی کرده است.

## ویژگی‌های کلیدی

- **حفظ چیدمان**: ساختار، موقعیت و سبک اصلی سند را حفظ می‌کند
- **حفظ تصاویر و گرافیک‌ها**: تمام تصاویر، نمودارها، جداول و عناصر غیر متنی را حفظ می‌کند
- **مدیریت متن راست به چپ**: متن فارسی را به درستی با تراز مناسب نمایش می‌دهد
- **قابلیت هوشمند شکستن خطوط**: به طور هوشمند متن فارسی را برای حفظ خوانایی شکست می‌دهد
- **تنظیم خودکار اندازه فونت**: به طور خودکار اندازه فونت را تنظیم می‌کند تا متن در محدوده‌های مشخص جای گیرد
- **ترجمه تخصصی حوزه‌های مختلف**: حالت‌های ترجمه تخصصی برای محتوای علمی، پزشکی، فنی و حقوقی
- **پشتیبانی از حوزه ژنتیک**: مدیریت تخصصی اصطلاحات ژنتیک و محتوای دانشگاهی
- **مدیریت محدودیت‌های API**: مدیریت هوشمند محدودیت‌های API با تلاش مجدد خودکار و تأخیر نمایی
- **یکپارچه‌سازی فونت‌های فارسی**: پشتیبانی داخلی از فونت‌های محبوب فارسی (وزیرمتن، ساحل، صمیم)
- **بازیابی از خطا**: توانایی ادامه پردازش پس از برخورد با خطاها
- **دقت در سطح کاراکتر**: پردازش کاراکتر به کاراکتر برای بالاترین دقت

## نصب و راه‌اندازی

### راه‌اندازی خودکار (توصیه شده)

از اسکریپت راه‌اندازی ما استفاده کنید که همه چیز را برای شما مدیریت می‌کند:

```bash
./setup.sh
```

### راه‌اندازی دستی

1. کلون کردن مخزن:
```bash
git clone https://github.com/ItsOrv/Ai-PDF-Translate.git
cd Ai-PDF-Translate
```

2. ایجاد و فعال‌سازی محیط مجازی:
```bash
python -m venv venv
source venv/bin/activate  # در ویندوز: venv\Scripts\activate
```

3. نصب وابستگی‌ها:
```bash
pip install -r requirements.txt
```

4. دانلود و راه‌اندازی فونت‌های فارسی:
```bash
python tools/download_fonts.py
```

5. پیکربندی کلید API:
   - فایل `.env.example` را به `.env` کپی کنید
   - کلید API جمینی خود را به فایل `.env` اضافه کنید
   - دریافت کلید API از [Google AI Studio](https://aistudio.google.com/app/apikey)

## نمونه‌های استفاده

### ترجمه پایه

ترجمه یک PDF با تنظیمات پیش‌فرض:

```bash
python main.py --input document.pdf --output translated.pdf
```

### ترجمه تخصصی حوزه‌های مختلف

برای مقالات علمی:
```bash
python main.py --input scientific_paper.pdf --output translated_paper.pdf --domain scientific
```

برای مقالات تحقیقاتی ژنتیک:
```bash
python main.py --input genetics_research.pdf --output translated_genetics.pdf --domain genetic
```

برای اسناد حقوقی:
```bash
python main.py --input contract.pdf --output translated_contract.pdf --domain legal
```

### پردازش اسناد بزرگ

برای اسناد بزرگ، ممکن است نیاز به تنظیم اندازه دسته برای مدیریت محدودیت‌های API داشته باشید:
```bash
python main.py --input large_document.pdf --output translated_large.pdf --batch-size 2 --continue-on-error
```

## گزینه‌های خط فرمان

| گزینه | نسخه کوتاه | توضیحات | پیش‌فرض |
|--------|-------|-------------|---------|
| `--input` | `-i` | مسیر فایل PDF ورودی | (اجباری) |
| `--output` | `-o` | مسیر فایل PDF خروجی | input_translated.pdf |
| `--batch-size` | `-b` | تعداد عناصر متنی در هر دسته ترجمه | 3 |
| `--continue-on-error` | `-c` | در صورت بروز خطا، با متن ترجمه نشده ادامه دهید | False |
| `--domain` | `-d` | تخصصی‌سازی حوزه ترجمه | general |
| `--verbose` | `-v` | فعال‌سازی گزارش‌دهی جزئیات | False |

### حوزه‌های ترجمه موجود

- `general`: ترجمه عمومی
- `scientific`: محتوای علمی و دانشگاهی
- `genetic`: اصطلاحات ژنتیک و ژنومیک
- `medical`: محتوای پزشکی و سلامت
- `legal`: اسناد حقوقی و قراردادی
- `technical`: محتوای مهندسی و فنی

## جزئیات فنی

### نحوه کارکرد

1. **استخراج متن**: برنامه عناصر متنی و موقعیت دقیق آنها را از PDF استخراج می‌کند
2. **ترجمه**: متن با درخواست‌های تخصصی بر اساس حوزه به API جمینی گوگل ارسال می‌شود
3. **بازسازی چیدمان**: متن ترجمه شده دقیقاً در همان چیدمان اصلی قرار می‌گیرد
4. **مدیریت فونت**: فونت‌های فارسی به طور خودکار انتخاب و اندازه‌گذاری می‌شوند تا با سبک اصلی مطابقت داشته باشند
5. **رندرینگ راست به چپ**: متن به درستی با تراز راست به چپ و شکل‌دهی مناسب کاراکترها نمایش داده می‌شود

### موقعیت‌دهی هوشمند متن

این برنامه از چندین تکنیک برای اطمینان از قرارگیری مناسب متن فارسی استفاده می‌کند:

- **شکستن پویای خطوط**: به طور هوشمند متن را در مرزهای مناسب می‌شکند
- **تنظیم اندازه تطبیقی**: در صورت نیاز برای جای دادن متن ترجمه شده طولانی‌تر، اندازه فونت را کاهش می‌دهد
- **محافظت از حاشیه**: از گسترش متن فراتر از مرزهای صفحه جلوگیری می‌کند
- **پردازش در سطح کاراکتر**: متن فارسی را در سطح کاراکتر برای شکستن دقیق خطوط مدیریت می‌کند

### بهینه‌سازی API

- **محدودیت نرخ**: محدودیت‌های API جمینی گوگل را رعایت می‌کند (15 درخواست در دقیقه برای نسخه رایگان)
- **تأخیر نمایی**: تلاش‌های مجدد هوشمند با افزایش تأخیر بین تلاش‌ها
- **پردازش دسته‌ای**: متن را در دسته‌ها پردازش می‌کند تا استفاده از API را بهینه کند
- **تأخیر تصادفی**: تأخیرهای تصادفی اضافه می‌کند تا از تلاش‌های مجدد همزمان جلوگیری شود

## عیب‌یابی

### مشکلات API

- **خطاهای محدودیت نرخ**: برنامه به طور خودکار محدودیت‌های نرخ را مدیریت می‌کند، اما می‌توانید اندازه دسته را بیشتر کاهش دهید
- **مشکلات کلید API**: اطمینان حاصل کنید که کلید API شما به درستی در فایل `.env` تنظیم شده است
- **مشکلات اتصال**: اتصال اینترنت و تنظیمات فایروال خود را بررسی کنید

### کیفیت ترجمه

- **ترجمه ضعیف**: یک تخصص حوزه متفاوت را امتحان کنید (گزینه --domain)
- **مشکلات اصطلاحات**: برای اسناد علمی/فنی، از حوزه مناسب استفاده کنید
- **مشکلات متنی**: برای اسناد بزرگ با ارجاعات متقابل، در قطعات کوچکتر پردازش کنید

### رندرینگ PDF

- **سرریز متن**: برنامه این مورد را به طور خودکار مدیریت می‌کند، اما چیدمان‌های پیچیده ممکن است به تنظیم دستی نیاز داشته باشند
- **فونت‌های گمشده**: `python tools/download_fonts.py` را اجرا کنید تا از نصب تمام فونت‌های فارسی اطمینان حاصل کنید
- **کیفیت تصویر**: تصاویر با کیفیت اصلی خود حفظ می‌شوند

## تست کلید API

بررسی کنید که آیا کلید API جمینی شما به درستی کار می‌کند:

```bash
python tools/test_api_key.py
```

## شروع سریع

می‌خواهید سریعاً پروژه را امتحان کنید؟

```bash
python example.py
```

این دستور یک فایل PDF را در پوشه `samples` (یا پوشه فعلی) پیدا کرده و ترجمه می‌کند.

## مشارکت

مشارکت‌ها مورد استقبال قرار می‌گیرند! لطفاً برای ارسال درخواست Pull، اقدام کنید.

## مجوز

این پروژه تحت مجوز MIT منتشر شده است - برای جزئیات به فایل LICENSE مراجعه کنید. 
